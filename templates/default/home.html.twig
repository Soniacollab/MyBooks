{% extends "base.html.twig" %}

{% block title %}Accueil{% endblock %}

{% block body %}
    <main>
        <!-- Titre de la page -->
        <div class="p-3 mx-auto text-center">
            <h1 class="display-4">Livres</h1>
        </div>

        <!-- Contenu de la page -->
        <div class="py-5 bg-light">
            <div class="container">
                <div class="row">
                    {% if books is empty %}
                        <p class="text-center text-muted">Aucun livre trouvé.</p>
                    {% else %}
                        {% for book in books %}
                            {% include 'partials/_card.html.twig' %}
                        {% endfor %}
                    {% endif %}
                </div>

                <!-- Pagination Bootstrap -->
                {% if totalPages > 1 %}
                    <nav aria-label="Pagination">
                        <ul class="pagination justify-content-center mt-4">
                            {# Bouton "Précédent" #}
                            <li class="page-item {% if page <= 1 %}disabled{% endif %}">
                                <a class="page-link" href="?page={{ page - 1 }}&search={{ search }}&genre={{ genre }}">Précédent</a>
                            </li>

                            {# Liens pour chaque page #}
                            {% for p in 1..totalPages %}
                                <li class="page-item {% if p == page %}active{% endif %}">
                                    <a class="page-link" href="?page={{ p }}&search={{ search }}&genre={{ genre }}">{{ p }}</a>
                                </li>
                            {% endfor %}

                            {# Bouton "Suivant" #}
                            <li class="page-item {% if page >= totalPages %}disabled{% endif %}">
                                <a class="page-link" href="?page={{ page + 1 }}&search={{ search }}&genre={{ genre }}">Suivant</a>
                            </li>
                        </ul>
                    </nav>
                {% endif %}
            </div>
        </div>
    </main>
{% endblock %}
